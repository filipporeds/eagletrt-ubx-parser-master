name: test
on: [push]


jobs:
  test:
    runs-on: ubuntu-latest

    steps:
    - uses: actions/checkout@v2
    
    - name: install libjson
      run: sudo apt install libjson-c-dev cmake
    - name: install programs for documenting the code
      run: |
        sudo apt-get install doxygen python3-setuptools python3-sphinx 
        pip3 install "breathe==4.12.0" exhale sphinx_rtd_theme
    - name: create documentation
      run: |
        cd docs
        sphinx-build --version
        sphinx-build -b html ../docs ../docs/_build
    #- name: create documentation
     # run: doxygen -g Doxyfile && ls && ( cat Doxyfile ; echo "EXTRACT_ALL=YES"; echo "EXCLUDE=../doxygen"; echo "RECURSIVE=YES" ) | doxygen - && cd html && cat index.html

    - name: Deploy ðŸš€
      uses: JamesIves/github-pages-deploy-action@4.0.0
      with:
        branch: docs # The branch the action should deploy to.
        folder: _build # The folder the action should deploy.

